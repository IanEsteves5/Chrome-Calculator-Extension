var commands=[new command("help",function(){var a="Commands :";for(var b=0;b<commands.length;b++){a+="\n"+commands[b].name}return a}),new command("clear",function(){document.getElementById("calculatorInput").value="";document.getElementById("calculatorOutput").textContent="";return""}),new command("memory",function(){if(memory.length===0){return"Empty"}var a=memory[0].id+" = "+memory[0].val;for(var b=1;b<memory.length;b++){a+="\n"+memory[b].id+" = "+memory[b].val}return a}),new command("log",function(){return errorLog}),new command("functions",function(){var a="";for(var c=0;c<mathFunctions.length;c++){a+=(c===0?"":"\n")+mathFunctions[c].id+"(";for(var b=0;b<mathFunctions[c].numArgs;b++){a+=(b===0?"":",")+"x"+(mathFunctions[c].numArgs===1?"":b+1)}a+=")"}return a}),new command("tree",function(){window.open("tree.html","Tree");return"Opening tree..."})];var secretCommands=[new command(String.fromCharCode(80)+String.fromCharCode(69)+String.fromCharCode(78)+String.fromCharCode(73)+String.fromCharCode(83),function(){return String.fromCharCode(56)+String.fromCharCode(61)+String.fromCharCode(61)+String.fromCharCode(61)+String.fromCharCode(61)+String.fromCharCode(61)+String.fromCharCode(68)+String.fromCharCode(126)+String.fromCharCode(126)+String.fromCharCode(126)})];var inputHistory=[];function command(a,b){this.name=a;this.action=b}window.onload=function(){var b=document.getElementById("calculatorInput");var a=document.getElementById("calculatorOutput");b.onkeyup=function(e){if(e.keyCode===38){if(inputHistory[0]===b.value){return}for(var d=1;d<inputHistory.length;d++){if(inputHistory[d]===b.value){b.value=inputHistory[d-1];return}}b.value=inputHistory[inputHistory.length-1];return}if(e.keyCode===40){for(var d=0;d<inputHistory.length-1;d++){if(inputHistory[d]===b.value){b.value=inputHistory[d+1];return}}b.value="";return}if(e.keyCode!==13){return}for(var d=0;d<inputHistory.length;d++){if(inputHistory[d]===b.value){inputHistory.splice(d,1);break}}inputHistory.push(b.value);if(inputHistory.length>20){inputHistory.shift()}var c=null;for(var d=0;d<commands.length;d++){if(commands[d].name===b.value){c=commands[d].action();break}}for(var d=0;d<secretCommands.length;d++){if(secretCommands[d].name===b.value){c=secretCommands[d].action();break}}if(c===null){if(b.value===""){b.value="0"}result=calculate(b.value);if(result===null||isNaN(result)){c="ERR = "+b.value}else{c=result+" = "+b.value;b.value=result}}a.textContent=c+(a.textContent===""?"":"\n")+a.textContent}};